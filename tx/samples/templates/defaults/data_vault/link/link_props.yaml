name: Data Vault - Link

usageInfo: |
  The Data Vault Link Template is designed to create relationships between two or more hubs in a Data Vault model. 
  **This template requires the successful execution of two or more Data Vault - Hash Stage template joined into one Hash Stage** to generate and join hash keys from each hub. 
  The Link Template is used to establish a many-to-many relationship by linking records between these hubs.

  Key Properties to Configure:
  - Primary Key [itemName: AK]: a unique key generated by hashing the business keys from multiple hubs, identifying each relationship uniquely.
  - Load Date System column [itemName: LDTS]: inherited from the hash stage, this timestamp marks when the link record was first loaded.
  - Record Source System column [itemName: RCS]: identifies the origin of each link entry, inherited from the hash stage to provide data lineage.

  System columns used by this template:
  - ${parentPhysicalName}_HK: the unique hash key for each link, combining keys from two or more hubs.
  - __LOAD_DATE_TS: the timestamp indicating when a record was added to the link, ensuring accurate tracking of when relationships were established.
  - __RECORD_SOURCE: captures the source of each link entry for auditability and lineage tracking.

  **Important:** Ensure that at least two hash stages are fully configured and executed and joined into another hash stage, as this Link Template requires both to create a complete record. The Link Template is essential for establishing relationships in a Data Vault model, facilitating many-to-many connections across hubs while maintaining the history and lineage of each relationship.


physicalName: 'LNK_${parentPhysicalName}'
logicalName: '${parentLogicalName} Link'
color: 'red'

inheritIdentifiersAs: pk
inheritAttributes: false
inheritColumnSet:                                           # Inherit columnSet columns from parent table(s) (AK | BK | DELTA | FK | custom string)
  - AK
  - LDTS
  - RCS

nodeSettings:
- groupName: 'System UI Items'
  groupDesc: 'System UI Items'
  isEnabled: true
  items:
  - itemType: materialization
    default: 'table'
    options:
    - 'transient'
    - 'table'
    - 'view'
    isRequired: true
    isEnabled: true

- groupName: 'Column Settings'
  groupDesc: 'Column settings'
  isEnabled: true
  items:
  - itemType: textLine
    itemDesc: 'Hub Group Name'
    itemName: 'hubGroupName'
    isRequired: true
    isEnabled: false  

  - itemType: columnSet
    itemDesc: 'Primary Key'
    itemName: 'AK'
    isRequired: true
    isEnabled: false        

  - itemType: columnSet
    itemDesc: 'Load date system column'
    itemName: 'LDTS'
    isRequired: true
    isEnabled: false

  - itemType: columnSet
    itemDesc: 'Record source system column'
    itemName: 'RCS'
    isRequired: true
    isEnabled: false